<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Notes</title><meta name=apple-mobile-web-app-title content="Notes"><link rel=stylesheet href=/main.css></head><body><main class=index><article><a href=/>back</a><header><h1>CDC <small>in notes</small></h1><small>2022-03-02</small></header><div id=outline-container-headline-1 class=outline-3><h3 id=headline-1>Summary</h3><div id=outline-text-headline-1 class=outline-text-3><p>Recently, at HelloFresh I was tasked with prototyping a solution which
involved we have a Kafka message published. While the quickest could
have been to write a producer and consumer perhaps in the same
process. Given its a new code base that was heavily abstracted, which
we didn't understand much and crucial component to core HelloFresh
business. Why would we do this to ourselves?</p><p>We settled on a non intrusive approach. The idea is to create a
new denormalised table which would have all the data required for the
event produced. Database triggers would populate this table.</p><p>Next we introduced Debezium. Debezium is a software to capture change
data of the database tables. Captured data is transformed and
published to the final kafka topic using Benthos.</p></div></div><div id=outline-container-headline-2 class=outline-3><h3 id=headline-2>Debezium</h3><div id=outline-text-headline-2 class=outline-text-3><p>Debezium relies on postgres's replication mechanism. Postgresql
during it's normal operations, generates WAL files, they are binary
files with entries know as xlog.</p></div></div></article></main></body></html>