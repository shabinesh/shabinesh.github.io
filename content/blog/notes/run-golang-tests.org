---
title: "Elisp function to run Golang unit tests"
date: 2021-07-16T11:39:59+02:00
draft: false
categories:
- golang
- emacs
---

A elisp function to run a unit test. Put the function in ~/.emacs

  #+CAPTION: go-run-unit-test
  #+BEGIN_SRC elisp
    (defun go-run-unit-test ()
      (interactive)
      (let ((lineStr ""))
	(if (string= (thing-at-point 'word) "func")
	    (setq lineStr (thing-at-point 'word))
	  (progn
	    (search-backward "func")
	    (setq lineStr (thing-at-point 'line))))

	(let ((funcName (string-trim-left (car (split-string (thing-at-point 'line) "(")) "^func\s")))
	  (start-process "GOTEST" "*GOTEST*" "go" "test" "-run" (concat "^" funcName "$")))))

  #+END_SRC
